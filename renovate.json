{
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "extends": [
        "config:recommended"
    ],
    "timezone": "Europe/Paris",
    "schedule": [
        "every weekend"
    ],
    "labels": [
        "dependencies",
        "renovate"
    ],
    "assignees": [
        "@team-lead"
    ],
    "packageRules": [
        {
            "description": "Grouper toutes les dépendances FastAPI ensemble",
            "matchPackagePatterns": [
                "^fastapi",
                "^uvicorn",
                "^pydantic"
            ],
            "groupName": "FastAPI ecosystem",
            "automerge": false
        },
        {
            "description": "Grouper SQLAlchemy et drivers DB",
            "matchPackageNames": [
                "sqlalchemy",
                "psycopg2-binary"
            ],
            "groupName": "Database stack",
            "schedule": [
                "before 5am on monday"
            ]
        },
        {
            "description": "Auto-merge pour les patches de dépendances de test",
            "matchPackagePatterns": [
                "^pytest"
            ],
            "matchUpdateTypes": [
                "patch"
            ],
            "automerge": true,
            "automergeType": "pr"
        },
        {
            "description": "Mise à jour Docker en minor uniquement",
            "matchDatasources": [
                "docker"
            ],
            "matchUpdateTypes": [
                "major"
            ],
            "enabled": false
        },
        {
            "description": "Alertes de sécurité prioritaires",
            "matchUpdateTypes": [
                "patch"
            ],
            "matchCurrentVersion": "!/^0/",
            "automerge": true,
            "labels": [
                "security",
                "automerge"
            ]
        }
    ],
    "vulnerabilityAlerts": {
        "enabled": true,
        "labels": [
            "security",
            "priority-high"
        ]
    },
    "docker": {
        "enabled": true
    },
    "pip_requirements": {
        "enabled": true
    }
}